<!DOCTYPE HTML>
<html>
  <head>
    <link href="../docs/assets/css/bootstrap.css" rel="stylesheet">
    <style>
      .dropdown-menu ul {
        margin: 0;
        padding: 0;
        list-style: none;
      }

      .dropdown-menu hr { 
        margin: 0 0 3px 0;
        padding: 0;
      }

      .dropdown-menu form hr {
        margin-bottom: 10px;
      }

      .show-form-link {
        display: block;
      }

      .show-form-link:hover {
        background: #00aadd;
        text-decoration: none;
        color: #fff;
      }


      .dropdown-menu form.well {
        border: none;
        box-shadow: none;
      }


    </style>
  </head>
  <body class="bizo-app">

    <div class="container content">
      <h2>Actions Widget Prototype</h2>
      <div class="btn-group actions-widget">
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
          Select Action 
          <span class="caret"></span>
        </a>
        <div class="dropdown-menu span6">
          <div class="existing-actions">
            <ul>
              <li><a href="#">Action #1 Some Really Really Really Long action name</a></li>
              <li><a href="#">Action #2</a></li>
              <li><a href="#">Action #3</a></li>
              <li><a href="#">Action #4</a></li>
            </ul>
            <hr /> 
            <a href="#" class="show-form-link">
              <i class="icon-plus-sign"></i>
              New Action
            </a>
          </div>

          <form class="well" style="display:none;">
            <h3>New Action</h3>
            <hr />
            <input type="text" class="span5" placeholder="Name">
            <input type="text" class="span5" placeholder="URL">
            <button class="btn cancel">Cancel</button>

            <button type="submit" class="btn btn-success"> 
              Save 
            </button>
          </form>

        </div>
      </div>


    </div>

    <script type="text/javascript" src="../docs/assets/js/jquery.js"></script>
    <script type="text/javascript" src="../docs/assets/js/bootstrap-dropdown.js"></script>
    <script type="text/javascript">
      var form = $('.dropdown-menu').find('form')
      
      form.click(function (e) {
          e.stopPropagation();
      });

      form.on("click.actions-widget", ".cancel", function(e) {
        console.log(e)
        e.stopPropagation();
        var $this = $(this);
        var parent = $this.parents(".dropdown-menu")
        parent.find("form").hide();
        parent.find(".existing-actions").fadeIn(200);
      });
</script>



<script type="text/javascript">
  var actionWidgets = $(".actions-widget")
  actionWidgets.on("click.actions-widget", ".dropdown-menu a.show-form-link", function(e) {
      e.stopPropagation();
      var $this = $(this);
      var parent = $this.parents(".dropdown-menu")
      parent.find(".existing-actions").hide();
      parent.find("form").fadeIn(200);
      });




actionWidgets.on("click.actions-widget", ".existing-actions li a", function(e) {
    var $this = $(this)
    var parent = $this.parents(".actions-widget")
    console.log($this.html())
    parent.find(".dropdown-toggle").html($this.html() + "<span class='caret'></span>")
    });

</script>

      </body>
    </html>
